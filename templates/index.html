<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GirlsNav: Your AI Coach Companion</title>
  <style>
    .hidden { display: none; }
    .progress-bar { width: 100%; background-color: #f3f3f3; border-radius: 4px; overflow: hidden; margin-top: 10px; }
    .progress-fill { height: 20px; background-color: #4caf50; width: 0%; transition: width 0.4s ease-in-out; }
    .description { font-size: 1.1em; margin: 20px 0; max-width: 700px; }
  </style>
</head>
<body>
  <h1>GirlsNav</h1>
  <p class="description">
    GirlsNav is your daughter’s AI-powered training companion designed to give youth athletes every advantage to shine on the court. With personalized video analysis, performance insights, and real-time feedback, GirlsNav helps young players build confidence, skill, and game time — while giving parents a transparent view into their child's athletic growth.
  </p>

  <!-- Upload Section -->
  <div id="uploadSection">
    <form id="uploadForm" enctype="multipart/form-data">
      <label for="videoFile">Upload your game video:</label>
      <input type="file" id="videoFile" name="video" accept="video/*" required>
      <button type="submit">Upload</button>
    </form>
  </div>

  <!-- Video Preview Thumbnail -->
  <div id="videoThumbnail" class="hidden">
    <p>Video uploaded:</p>
    <img id="thumbnailPreview" src="" alt="Video thumbnail" style="width: 300px;">
  </div>

  <!-- Analyze Button -->
  <div id="analyzeSection" class="hidden">
    <button id="analyzeBtn">Analyze Video</button>
    <div class="progress-bar">
      <div id="progressFill" class="progress-fill"></div>
    </div>
    <p id="progressStatus"></p>
  </div>

  <script>
    const uploadForm = document.getElementById("uploadForm");
    const uploadSection = document.getElementById("uploadSection");
    const videoThumbnail = document.getElementById("videoThumbnail");
    const thumbnailPreview = document.getElementById("thumbnailPreview");
    const analyzeSection = document.getElementById("analyzeSection");
    const analyzeBtn = document.getElementById("analyzeBtn");
    const progressFill = document.getElementById("progressFill");
    const progressStatus = document.getElementById("progressStatus");

    uploadForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(uploadForm);
      const response = await fetch("/upload", {
        method: "POST",
        body: formData
      });

      const result = await response.json();
      if (result.status === "success") {
        thumbnailPreview.src = result.thumbnail;
        uploadSection.classList.add("hidden");
        videoThumbnail.classList.remove("hidden");
        analyzeSection.classList.remove("hidden");
      } else {
        alert("Upload failed: " + result.message);
      }
    });

    analyzeBtn.addEventListener("click", () => {
      progressFill.style.width = "0%";
      progressStatus.innerText = "Starting analysis...";

      let progress = 0;
      const interval = setInterval(() => {
        if (progress >= 100) {
          clearInterval(interval);
          progressStatus.innerText = "Analysis complete!";
          return;
        }
        progress += 10;
        progressFill.style.width = `${progress}%`;
        progressStatus.innerText = `Analyzing video: ${progress}%`;
      }, 500);
    });
  </script>
</body>
</html>
